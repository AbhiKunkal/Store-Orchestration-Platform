# WooCommerce Store Chart — default values for local development.
# Production overrides go in values-prod.yaml.
# Per-store overrides are passed via --set at install time.

# Store identity
store:
  id: ""          # Set at install time: --set store.id=store-abc
  domain: ""      # Set at install time: --set store.domain=store-abc.127.0.0.1.nip.io

# ─── MySQL Configuration ──────────────────────────────────────────
mysql:
  image: mysql:8.0
  rootPassword: ""       # MUST be set at install time (never hardcoded)
  database: wordpress
  user: wordpress
  password: ""           # MUST be set at install time
  
  storage:
    size: 2Gi
    className: ""        # Empty = use cluster default

  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

# ─── WordPress Configuration ─────────────────────────────────────
wordpress:
  image: wordpress:6.4-apache
  
  adminUser: admin
  adminPassword: ""      # MUST be set at install time
  adminEmail: admin@example.com
  siteTitle: "My WooCommerce Store"

  storage:
    size: 2Gi
    className: ""

  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

# ─── Init Job (WP-CLI setup) ─────────────────────────────────────
init:
  image: wordpress:cli-2.10-php8.3
  # This job runs after WordPress + MySQL are up
  # It installs WooCommerce, sets up the store, and adds sample data

# ─── Ingress ─────────────────────────────────────────────────────
ingress:
  enabled: true
  className: nginx
  host: ""               # Set at install time
  tls: false
  annotations: {}

# ─── Network Policy ──────────────────────────────────────────────
networkPolicy:
  enabled: true

# ─── Resource Quota ──────────────────────────────────────────────
resourceQuota:
  enabled: true
  limits:
    cpu: "2"
    memory: 2Gi
    pods: "10"
    persistentvolumeclaims: "5"
    storage: "10Gi"

# ─── Limit Range ─────────────────────────────────────────────────
limitRange:
  enabled: true
  default:
    cpu: 500m
    memory: 512Mi
  defaultRequest:
    cpu: 100m
    memory: 128Mi
