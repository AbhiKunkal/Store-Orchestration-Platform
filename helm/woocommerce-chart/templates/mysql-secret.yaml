# ─── MySQL Secret ──────────────────────────────────────────────────
#
# WHY Kubernetes Secrets?
# - Passwords are NOT stored in source code or container images
# - Secrets are mounted as environment variables in pods
# - RBAC can restrict who reads them
# - In production, use external secret managers (Vault, AWS SM)
#
# NOTE: base64 encoding is NOT encryption. K8s Secrets are stored
# in etcd. Enable etcd encryption at rest for true security.

apiVersion: v1
kind: Secret
metadata:
  name: {{ include "woocommerce.fullname" . }}-mysql
  labels:
    {{- include "woocommerce.labels" . | nindent 4 }}
type: Opaque
stringData:
  # stringData is auto-encoded to base64 by Kubernetes
  mysql-root-password: {{ .Values.mysql.rootPassword | quote }}
  mysql-password: {{ .Values.mysql.password | quote }}
  mysql-database: {{ .Values.mysql.database | quote }}
  mysql-user: {{ .Values.mysql.user | quote }}
